<!-- templates/mental-health.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Mental Health Support - HealthPredict Pro</title>
    <style>
        .mood-tracker {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
        }
        .mood-option {
            font-size: 2rem;
            cursor: pointer;
            transition: transform 0.3s;
            padding: 10px;
        }
        .mood-option:hover {
            transform: scale(1.3);
        }
        .breathing-exercise {
            background: #4CAF50;
            color: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        .breathing-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            animation: breathe 8s infinite;
        }
        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>üß† Mental Health & Wellbeing</h2>
        
        <!-- Mood Tracker -->
        <div class="mood-tracker mt-4">
            <h4>How are you feeling today?</h4>
            <div class="row text-center">
                <div class="col">
                    <div class="mood-option" data-mood="excellent" onclick="logMood('excellent')">
                        üòÑ Excellent
                    </div>
                </div>
                <div class="col">
                    <div class="mood-option" data-mood="good" onclick="logMood('good')">
                        üôÇ Good
                    </div>
                </div>
                <div class="col">
                    <div class="mood-option" data-mood="neutral" onclick="logMood('neutral')">
                        üòê Neutral
                    </div>
                </div>
                <div class="col">
                    <div class="mood-option" data-mood="poor" onclick="logMood('poor')">
                        üòî Poor
                    </div>
                </div>
                <div class="col">
                    <div class="mood-option" data-mood="bad" onclick="logMood('bad')">
                        üò¢ Bad
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Breathing Exercise -->
        <div class="breathing-exercise mt-4">
            <h4>üå¨Ô∏è Breathing Exercise for Stress Relief</h4>
            <div class="breathing-circle" id="breath-circle">
                Breathe In
            </div>
            <p>Follow the circle: Breathe IN as it expands, OUT as it contracts</p>
            <button class="btn btn-light" onclick="startBreathing()">
                Start 5-Minute Exercise
            </button>
        </div>
        
        <!-- Crisis Resources -->
        <div class="card mt-4">
            <div class="card-body">
                <h4>üÜò Crisis Support Resources</h4>
                <div class="row">
                    <div class="col-md-6">
                        <div class="alert alert-danger">
                            <h5>Immediate Help</h5>
                            <p><strong>National Suicide Prevention Lifeline:</strong><br>
                            1-800-273-8255</p>
                            <button class="btn btn-danger" onclick="callHotline()">
                                üìû Call Now
                            </button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="alert alert-warning">
                            <h5>Crisis Text Line</h5>
                            <p>Text HOME to 741741</p>
                            <button class="btn btn-warning" onclick="textHotline()">
                                üí¨ Text Now
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Therapist Finder -->
                <div class="mt-3">
                    <h5>Find Professional Help</h5>
                    <div class="input-group">
                        <input type="text" class="form-control" 
                               placeholder="Enter your location" id="therapist-location">
                        <button class="btn btn-primary" onclick="findTherapists()">
                            Search Therapists
                        </button>
                    </div>
                    <div id="therapist-results" class="mt-3"></div>
                </div>
            </div>
        </div>
        
        <!-- Mood History Chart -->
        <div class="card mt-4">
            <div class="card-body">
                <h4>üìà Your Mood History</h4>
                <canvas id="moodChart" height="100"></canvas>
            </div>
        </div>
    </div>
    
    <script>
        // Mood tracking
        async function logMood(mood) {
            const response = await fetch('/api/log-mood', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({mood, timestamp: new Date().toISOString()})
            });
            
            alert(`Mood logged: ${mood}`);
            updateMoodChart();
        }
        
        // Breathing exercise
        function startBreathing() {
            const circle = document.getElementById('breath-circle');
            let phase = 'in';
            let seconds = 0;
            
            const timer = setInterval(() => {
                seconds++;
                
                if (seconds % 8 < 4) {
                    phase = 'in';
                    circle.textContent = 'Breathe IN';
                    circle.style.background = '#4CAF50';
                } else {
                    phase = 'out';
                    circle.textContent = 'Breathe OUT';
                    circle.style.background = '#2196F3';
                }
                
                if (seconds >= 300) { // 5 minutes
                    clearInterval(timer);
                    circle.textContent = 'Exercise Complete!';
                    alert('Great job! Breathing exercise completed.');
                }
            }, 1000);
        }
        
        // Emergency contacts
        function callHotline() {
            if (confirm('Call National Suicide Prevention Lifeline?')) {
                window.location.href = 'tel:1-800-273-8255';
            }
        }
        
        function textHotline() {
            if (confirm('Open messaging to text HOME to 741741?')) {
                window.location.href = 'sms:741741?body=HOME';
            }
        }
        
        // Therapist finder (mock)
        function findTherapists() {
            const location = document.getElementById('therapist-location').value;
            const mockTherapists = [
                {name: 'Dr. Sarah Johnson', specialty: 'Anxiety & Depression', distance: '2.3 km'},
                {name: 'Mindful Therapy Center', specialty: 'Cognitive Behavioral Therapy', distance: '4.1 km'},
                {name: 'Community Mental Health Clinic', specialty: 'Sliding Scale Fees', distance: '1.8 km'}
            ];
            
            const resultsDiv = document.getElementById('therapist-results');
            resultsDiv.innerHTML = mockTherapists.map(t => `
                <div class="card mb-2">
                    <div class="card-body">
                        <h6>${t.name}</h6>
                        <p class="mb-1">${t.specialty}</p>
                        <small class="text-muted">${t.distance} away</small>
                        <button class="btn btn-sm btn-outline-primary float-end">
                            Book Appointment
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // Mood chart
        function updateMoodChart() {
            const ctx = document.getElementById('moodChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Mood Level',
                        data: [4, 3, 2, 3, 4, 5, 4],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    scales: {
                        y: {
                            min: 1,
                            max: 5,
                            ticks: {
                                callback: function(value) {
                                    const moods = ['üò¢', 'üòî', 'üòê', 'üôÇ', 'üòÑ'];
                                    return moods[value-1] || value;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Initialize
        updateMoodChart();
    </script>
</body>
</html>